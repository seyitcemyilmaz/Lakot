set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

option(LAKOT_USE_PLATFORM_WINDOWS "Windows Platform" OFF)
option(LAKOT_USE_PLATFORM_LINUX "Linux Platform" OFF)
option(LAKOT_USE_PLATFORM_ANDROID "Android Platform" OFF)

option(LAKOT_USE_RENDERER_OPENGL "Use OpenGL" OFF)
option(LAKOT_USE_RENDERER_OPENGLES "Use OpenGLES" OFF)

option(LAKOT_USE_WINDOW_GLFW "Use GLFW" OFF)
option(LAKOT_USE_WINDOW_EGL "Use EGL" OFF)

if(CMAKE_SYSTEM_NAME STREQUAL "Windows")
    add_definitions(-DLAKOT_PLATFORM_WINDOWS)
    set(LAKOT_USE_PLATFORM_WINDOWS ON)
    set(LAKOT_USE_RENDERER_OPENGL ON)
    set(LAKOT_USE_WINDOW_GLFW ON)
elseif(CMAKE_SYSTEM_NAME STREQUAL "Linux")
    add_definitions(-DLAKOT_PLATFORM_LINUX)
    set(LAKOT_USE_PLATFORM_LINUX ON)
    set(LAKOT_USE_RENDERER_OPENGL ON)
    set(LAKOT_USE_WINDOW_GLFW ON)
elseif(CMAKE_SYSTEM_NAME STREQUAL "Android")
    add_definitions(-DLAKOT_PLATFORM_ANDROID)
    set(LAKOT_USE_PLATFORM_ANDROID ON)
    set(LAKOT_USE_RENDERER_OPENGLES ON)
    set(LAKOT_USE_WINDOW_EGL ON)
endif()

if(LAKOT_USE_RENDERER_OPENGL)
    add_definitions(-DLAKOT_RENDERER_OPENGL)
elseif(LAKOT_USE_RENDERER_OPENGLES)
    add_definitions(-DLAKOT_RENDERER_OPENGLES)
else()
    message(FATAL_ERROR "Renderer is not found.")
endif()

if(LAKOT_USE_WINDOW_GLFW)
    add_definitions(-DLAKOT_WINDOW_GLFW)
elseif(LAKOT_USE_WINDOW_EGL)
    add_definitions(-DLAKOT_WINDOW_EGL)
else()
    message(FATAL_ERROR "Renderer is not found.")
endif()

option(LAKOT_USE_GPU "Use GPU" OFF)
if(LAKOT_USE_PLATFORM_WINDOWS OR LAKOT_USE_PLATFORM_LINUX)
    if(LAKOT_USE_GPU)
        add_definitions(-DLAKOT_USE_GPU)
    endif()
endif()

if(LAKOT_USE_PLATFORM_WINDOWS)
    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} /SUBSYSTEM:WINDOWS /ENTRY:mainCRTStartup")
endif()


set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin")
